<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planificación Académica - UIDE</title>
    <style>
        :root {
            --azul: #04136C;
            --mostaza: #DE912E;
            --vino: #862B39;
            --celeste: #9CBEE3;
            --verde: #8A9520;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }
        
        header {
            background-color: var(--azul);
            color: white;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
        }
        
        .logo {
            height: 50px;
            margin-right: 15px;
        }
        
        h1 {
            margin: 0;
            font-size: 24px;
        }
        
        .container {
            max-width: 1400px;
            margin: 20px auto;
            padding: 0 20px;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--azul);
        }
        
        .tab {
            padding: 10px 20px;
            background-color: var(--celeste);
            color: var(--azul);
            cursor: pointer;
            margin-right: 5px;
            border-radius: 5px 5px 0 0;
            font-weight: bold;
        }
        
        .tab.active {
            background-color: var(--azul);
            color: white;
        }
        
        .tab-content {
            display: none;
            background-color: white;
            padding: 20px;
            border-radius: 0 5px 5px 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .tab-content.active {
            display: block;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        
        th, td {
            padding: 10px;
            text-align: left;
            border: 1px solid #ddd;
        }
        
        th {
            background-color: var(--azul);
            color: white;
        }
        
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        
        .filters {
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .filter-item {
            display: flex;
            flex-direction: column;
        }
        
        label {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--azul);
        }
        
        select, input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .btn {
            background-color: var(--mostaza);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .btn:hover {
            background-color: #c97f1e;
        }
        
        .restriction-panel {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 4px solid var(--vino);
        }
        
        .highlight {
            background-color: rgba(222, 145, 46, 0.2);
        }
        
        .conflict {
            background-color: rgba(134, 43, 57, 0.2);
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .export-btn {
            background-color: var(--verde);
        }
        
        .export-btn:hover {
            background-color: #798b1c;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo-container">
            <img src="UIDE-Ecuador.png" alt="UIDE Logo" class="logo">
            <h1>Planificación Académica</h1>
        </div>
    </header>

    <div class="container">
        <div class="tabs">
            <div class="tab active" data-tab="docentes">Planificación Docente</div>
            <div class="tab" data-tab="estudiantes">Planificación Estudiante</div>
            <div class="tab" data-tab="materias">Materias</div>
            <div class="tab" data-tab="asignacion">Asignación</div>
        </div>

        <div class="tab-content active" id="docentes">
            <h2>Planificación Docente</h2>
            <div class="filters">
                <div class="filter-item">
                    <label for="filter-docente">Docente:</label>
                    <select id="filter-docente">
                        <option value="">Todos</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label for="filter-materia-doc">Materia:</label>
                    <select id="filter-materia-doc">
                        <option value="">Todas</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label for="filter-carrera-doc">Carrera:</label>
                    <select id="filter-carrera-doc">
                        <option value="">Todas</option>
                        <option value="ADMINISTRACIÓN">Administración</option>
                        <option value="MARKETING">Marketing</option>
                        <option value="NEGOCIOS INTERNACIONALES">Negocios Internacionales</option>
                    </select>
                </div>
            </div>
            <table id="tabla-docentes">
                <thead>
                    <tr>
                        <th>DOCENTE</th>
                        <th>TÍTULO ACADÉMICO</th>
                        <th>DEDICACIÓN</th>
                        <th>MATERIA</th>
                        <th>CÓDIGO ANTHOLOGY</th>
                        <th>CARRERAS QUE COMPARTEN</th>
                        <th>PRE-REQUISITO</th>
                        <th>CODIGO</th>
                        <th>HORAS TEÓRICAS</th>
                        <th>HORAS PRÁCTICAS</th>
                        <th>HORAS AUTÓNOMAS</th>
                        <th>CRÉDITOS</th>
                        <th>CAMPO DE FORMACIÓN</th>
                        <th>CICLO MALLA</th>
                        <th>Nº ORDEN EN LA MALLA</th>
                        <th>PARALELO</th>
                        <th>DIA</th>
                        <th>HORA</th>
                        <th>MODALIDAD</th>
                        <th>Nro. HORAS</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Los datos se cargarán dinámicamente -->
                </tbody>
            </table>
            <div class="action-buttons">
                <button class="btn export-btn" onclick="exportTableToExcel('tabla-docentes', 'planificacion-docente')">Exportar a Excel</button>
            </div>
        </div>

        <div class="tab-content" id="estudiantes">
            <h2>Planificación Estudiante</h2>
            <div class="filters">
                <div class="filter-item">
                    <label for="filter-estudiante">Estudiante:</label>
                    <select id="filter-estudiante">
                        <option value="">Todos</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label for="filter-carrera-est">Carrera:</label>
                    <select id="filter-carrera-est">
                        <option value="">Todas</option>
                        <option value="ADMINISTRACIÓN">Administración</option>
                        <option value="MARKETING">Marketing</option>
                        <option value="NEGOCIOS INTERNACIONALES">Negocios Internacionales</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label for="filter-ciclo-est">Ciclo:</label>
                    <select id="filter-ciclo-est">
                        <option value="">Todos</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                    </select>
                </div>
            </div>
            <table id="tabla-estudiantes">
                <thead>
                    <tr>
                        <th>CARRERA</th>
                        <th>ESTUDIANTE</th>
                        <th>CICLO DEL ESTUDIANTE</th>
                        <th>MALLA</th>
                        <th>CICLO DE LA MATERIA EN LA MALLA</th>
                        <th>COMPARTIDA CON CARRERA</th>
                        <th>MATERIA</th>
                        <th>PARALELO</th>
                        <th>DIA</th>
                        <th>HORA</th>
                        <th>MODALIDAD</th>
                        <th>NIVEL INGLES</th>
                        <th>OBSERVACIONES</th>
                        <th>DOCENTE</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Los datos se cargarán dinámicamente -->
                </tbody>
            </table>
            <div class="action-buttons">
                <button class="btn export-btn" onclick="exportTableToExcel('tabla-estudiantes', 'planificacion-estudiante')">Exportar a Excel</button>
            </div>
        </div>

        <div class="tab-content" id="materias">
            <h2>Materias</h2>
            <div class="filters">
                <div class="filter-item">
                    <label for="filter-materia">Materia:</label>
                    <select id="filter-materia">
                        <option value="">Todas</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label for="filter-carrera-mat">Carrera:</label>
                    <select id="filter-carrera-mat">
                        <option value="">Todas</option>
                        <option value="ADMINISTRACIÓN">Administración</option>
                        <option value="MARKETING">Marketing</option>
                        <option value="NEGOCIOS INTERNACIONALES">Negocios Internacionales</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label for="filter-ciclo-mat">Ciclo:</label>
                    <select id="filter-ciclo-mat">
                        <option value="">Todos</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                    </select>
                </div>
            </div>
            <table id="tabla-materias">
                <thead>
                    <tr>
                        <th>MALLA</th>
                        <th>CICLO DE LA MATERIA EN LA MALLA</th>
                        <th>COMPARTIDA CON CARRERA</th>
                        <th>MATERIA</th>
                        <th>PARALELO</th>
                        <th>DIA</th>
                        <th>HORA</th>
                        <th>Número de estudiantes</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Los datos se cargarán dinámicamente -->
                </tbody>
            </table>
            <div class="action-buttons">
                <button class="btn export-btn" onclick="exportTableToExcel('tabla-materias', 'materias')">Exportar a Excel</button>
            </div>
        </div>

        <div class="tab-content" id="asignacion">
            <h2>Asignación de Horarios</h2>
            <div class="restriction-panel">
                <h3>Restricciones de Horario</h3>
                <p>Aquí puede establecer restricciones de horario para evitar cruces con Prácticas Comunitarias u otras actividades.</p>
                <div class="filters">
                    <div class="filter-item">
                        <label for="restriction-carrera">Carrera:</label>
                        <select id="restriction-carrera">
                            <option value="ADMINISTRACIÓN">Administración</option>
                            <option value="MARKETING">Marketing</option>
                            <option value="NEGOCIOS INTERNACIONALES">Negocios Internacionales</option>
                        </select>
                    </div>
                    <div class="filter-item">
                        <label for="restriction-ciclo">Ciclo:</label>
                        <select id="restriction-ciclo">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                        </select>
                    </div>
                    <div class="filter-item">
                        <label for="restriction-dia">Día:</label>
                        <select id="restriction-dia">
                            <option value="LUNES">Lunes</option>
                            <option value="MARTES">Martes</option>
                            <option value="MIÉRCOLES">Miércoles</option>
                            <option value="JUEVES">Jueves</option>
                            <option value="VIERNES">Viernes</option>
                        </select>
                    </div>
                    <div class="filter-item">
                        <label for="restriction-hora">Franja Horaria:</label>
                        <select id="restriction-hora">
                            <option value="7-10">7:00 - 10:00</option>
                            <option value="10-13">10:00 - 13:00</option>
                            <option value="13-16">13:00 - 16:00</option>
                            <option value="16-19">16:00 - 19:00</option>
                            <option value="19-22">19:00 - 22:00</option>
                        </select>
                    </div>
                </div>
                <button class="btn" onclick="addRestriction()">Agregar Restricción</button>
                
                <div id="restrictions-list">
                    <h4>Restricciones Activas</h4>
                    <ul id="active-restrictions">
                        <!-- Las restricciones se agregarán aquí -->
                    </ul>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="btn" onclick="generateSchedules()">Generar Horarios</button>
                <button class="btn export-btn" onclick="exportAllData()">Exportar Todo</button>
            </div>
            
            <div id="schedule-results">
                <!-- Los resultados de la generación de horarios se mostrarán aquí -->
            </div>
        </div>
    </div>

    <script>
        // Datos cargados desde los archivos Excel (simulados aquí)
        const mallasData = [
            // Ejemplo de datos - en la implementación real se cargarían desde Excel
            {
                carrera: "ADMINISTRACIÓN",
                malla: "2019",
                ciclo: "PRIMERO",
                materia: "CONTABILIDAD EMPRESARIAL",
                codigo: "PP-01-CONT1",
                horas_teoricas: 3,
                horas_practicas: 0,
                horas_autonomas: 3,
                creditos: 4,
                orden: 1,
                prerrequisito: ""
            },
            // ... más datos de mallas
        ];

        const docentesData = [
            // Ejemplo de datos - en la implementación real se cargarían desde Excel
            {
                docente: "POWER SKILLS",
                titulo: "MAGISTER",
                dedicacion: "TIEMPO COMPLETO",
                materia: "EFFECTIVE COMMUNICATION",
                dia_disponible: "MIÉRCOLES/JUEVES/VIERNES",
                hora_disponible: "10:00-12:00/14:00-16:00/10:00-12:00/12:00-14:00",
                modalidad: "PRESENCIAL"
            },
            // ... más datos de docentes
        ];

        const estudiantesData = [
            // Ejemplo de datos - en la implementación real se cargarían desde Excel
            {
                carrera: "ADMINISTRACIÓN DE EMPRESAS",
                malla: "2019",
                estudiante: "CARLOS CALDERON PIZHCOCAMA",
                ciclo: 6,
                ciclo_siguiente: 7,
                nivel_ingles: ""
            },
            // ... más datos de estudiantes
        ];

        // Variables globales
        let restrictions = [];
        let scheduleData = {
            docentes: [],
            estudiantes: [],
            materias: []
        };

        // Inicialización
        document.addEventListener('DOMContentLoaded', function() {
            initializeTabs();
            loadFilterOptions();
            // En una implementación real, aquí se cargarían los datos desde Excel
            // y se procesarían para mostrar en las tablas
        });

        // Funciones de pestañas
        function initializeTabs() {
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remover clase active de todas las pestañas y contenidos
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    // Agregar clase active a la pestaña y contenido seleccionados
                    tab.classList.add('active');
                    document.getElementById(tab.dataset.tab).classList.add('active');
                });
            });
        }

        // Funciones de filtrado
        function loadFilterOptions() {
            // En una implementación real, se cargarían opciones únicas de los datos
            // Por ahora, solo un ejemplo
            const docentes = [...new Set(docentesData.map(d => d.docente))];
            const materias = [...new Set(mallasData.map(m => m.materia))];
            const estudiantes = [...new Set(estudiantesData.map(e => e.estudiante))];
            
            // Llenar opciones de filtro para docentes
            const filterDocente = document.getElementById('filter-docente');
            docentes.forEach(docente => {
                const option = document.createElement('option');
                option.value = docente;
                option.textContent = docente;
                filterDocente.appendChild(option);
            });
            
            // Llenar opciones de filtro para materias (docentes)
            const filterMateriaDoc = document.getElementById('filter-materia-doc');
            materias.forEach(materia => {
                const option = document.createElement('option');
                option.value = materia;
                option.textContent = materia;
                filterMateriaDoc.appendChild(option);
            });
            
            // Llenar opciones de filtro para estudiantes
            const filterEstudiante = document.getElementById('filter-estudiante');
            estudiantes.forEach(estudiante => {
                const option = document.createElement('option');
                option.value = estudiante;
                option.textContent = estudiante;
                filterEstudiante.appendChild(option);
            });
            
            // Llenar opciones de filtro para materias (materias)
            const filterMateria = document.getElementById('filter-materia');
            materias.forEach(materia => {
                const option = document.createElement('option');
                option.value = materia;
                option.textContent = materia;
                filterMateria.appendChild(option);
            });
            
            // Agregar event listeners para filtros
            document.querySelectorAll('select').forEach(select => {
                select.addEventListener('change', applyFilters);
            });
        }

        function applyFilters() {
            // En una implementación real, se filtrarían los datos según los criterios seleccionados
            console.log("Aplicando filtros...");
        }

        // Funciones de restricciones
        function addRestriction() {
            const carrera = document.getElementById('restriction-carrera').value;
            const ciclo = document.getElementById('restriction-ciclo').value;
            const dia = document.getElementById('restriction-dia').value;
            const hora = document.getElementById('restriction-hora').value;
            
            const restriction = {
                carrera,
                ciclo,
                dia,
                hora
            };
            
            restrictions.push(restriction);
            updateRestrictionsList();
        }

        function updateRestrictionsList() {
            const list = document.getElementById('active-restrictions');
            list.innerHTML = '';
            
            restrictions.forEach((restriction, index) => {
                const li = document.createElement('li');
                li.textContent = `${restriction.carrera} - Ciclo ${restriction.ciclo}: ${restriction.dia} ${restriction.hora}`;
                
                const removeBtn = document.createElement('button');
                removeBtn.textContent = 'Eliminar';
                removeBtn.classList.add('btn');
                removeBtn.style.marginLeft = '10px';
                removeBtn.style.padding = '2px 5px';
                removeBtn.style.fontSize = '12px';
                removeBtn.onclick = () => {
                    restrictions.splice(index, 1);
                    updateRestrictionsList();
                };
                
                li.appendChild(removeBtn);
                list.appendChild(li);
            });
        }

        // Funciones de generación de horarios
        function generateSchedules() {
            // En una implementación real, aquí se implementaría el algoritmo de asignación
            // que considere todas las restricciones y reglas establecidas
            
            // Simulación de generación
            const resultsDiv = document.getElementById('schedule-results');
            resultsDiv.innerHTML = `
                <div style="margin-top: 20px; padding: 15px; background-color: #e7f4e4; border-radius: 5px;">
                    <h3>Horarios Generados Exitosamente</h3>
                    <p>Se han asignado horarios a todos los docentes y estudiantes considerando las restricciones establecidas.</p>
                    <p>Revise las pestañas de Planificación Docente y Planificación Estudiante para ver los detalles.</p>
                </div>
            `;
            
            // Aquí se actualizarían los datos en las tablas con los horarios asignados
        }

        // Funciones de exportación
        function exportTableToExcel(tableId, filename) {
            // En una implementación real, se implementaría la exportación a Excel
            console.log(`Exportando tabla ${tableId} a archivo ${filename}.xlsx`);
            alert(`La funcionalidad de exportación a Excel se implementaría aquí para ${filename}`);
        }

        function exportAllData() {
            // En una implementación real, se exportarían todos los datos
            console.log("Exportando todos los datos");
            alert("La funcionalidad de exportación completa se implementaría aquí");
        }
    </script>
</body>
</html>
